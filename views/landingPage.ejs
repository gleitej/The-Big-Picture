<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>The Big Picture</title>

  <!-- Bootstrap core CSS -->
  <link href="vendor/bootstrap/css/bootstrap.css" rel="stylesheet">


  <!-- Custom fonts for this template -->
  <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
  <link href='https://fonts.googleapis.com/css?family=Kaushan+Script' rel='stylesheet' type='text/css'>
  <link href='https://fonzts.googleapis.com/css?family=Droid+Serif:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700' rel='stylesheet' type='text/css'>

  <!-- Custom styles for this template -->
  <link href="scss/agency.css" rel="stylesheet">

</head>

<body id="page-top">

  <!-- this code needs to be refactored to use a second collection.  This is a bandaid  -->
  <%continentSection = [];

    countrySection.forEach( i => {
      const ex = continentSection.find(e => {
         return e.continent == i.countryId;
     })
      if(ex == undefined){
          let newContinent = {continent : i.countryId};
          continentSection.push(newContinent);
      };    
    })
  %>

   <!-- Navigation -->
   <nav class="navbar navbar-expand-lg navbar-dark fixed-top" id="mainNav">
      <div class="container">
        <a class="navbar-brand js-scroll-trigger" href="#page-top"><i class="fas fa-camera-retro"></i></a>
        <button id="navButton" class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
          Menu
          <i class="fas fa-bars"></i>
        </button>
        <div class=" collapse navbar-collapse" id="navbarResponsive">
          <ul class=" navbar-nav ml-auto">

            <!-- generates nav bar options -->
            <% continentSection.forEach(i => { %>
              <li class="nav-item">
              <a id="textChange" class="nav-link js-scroll-trigger" href="<%= `#${i.continent.replace( /\s/g, '')}` %>" > <%=i.continent%></a>
            </li>
            <% }); %>
            
          </ul>
        </div>
      </div>
    </nav>
  

<section id="cover">

        <div id ="header">
    
            <h1 class="ml6">
                <span class="text-wrapper">
                  <span class="letters">
                    The Big Picture
                  </span>
                </span>
                </h1>
    
          <h3> In 2017 I left my country for the first time <br>
             I want to inspire others <br>
             Provide information <br>
             and share my travels
             </h3>

        </div>

        <div id="arrowContainer">
          <div class="arrow arrow-first"></div>
          <div class="arrow arrow-second"></div>
         </div>
        
</section>

    <!-- generates section -->
    <% continentSection.forEach(i => { %>

    <div style="padding-top: 4rem;" class="bg-light" id="<%=i.continent.replace( /\s/g, '')%>">

      

        <div class="row">
          <div class="col-lg-12 text-center">
            <h1 class="section-heading"><%=i.continent%></h1>
          </div>
        </div>
        

          <div class="row justify-content-center">
          <!-- nested loop generates countrys in corresponding continent section -->
          <% countrySection.forEach(e => {
            if(i.continent.toLowerCase() === e.countryId.toLowerCase()){ %>
              
            

            
              <div id="photo" onclick="location.href='/home/photos/<%=e._id%>'" class=" col-lg-8 col-8"  style="margin: 2%; height: 290px; width: 500px; background-image: url(<%=e.countryPhoto%>); color: white; background-position: center; background-repeat:  no-repeat; background-size:  cover; border-radius: 15px; ">
                              
                                    <div style=" border-radius: 15px; text-align: center;  padding-top:100px; padding-bottom: 144px;" class="row justify-content-center">
                                      <h2 >
                                          <%= e.country %>
                                      </h2>
                                       
                                    </div>

                                    
              </div>
              
 
            <% }
          }); %>
        </div>
        

        
      
    </div>
    
    <% }); %>
  


  <!-- Bootstrap core JavaScript -->
  <script src="vendor/jquery/jquery.min.js"></script>
  <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

  <!-- Plugin JavaScript -->
  <script src="vendor/jquery-easing/jquery.easing.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/2.0.2/anime.min.js"></script>

  <!-- Custom scripts for this template -->
  <script src="js/agency.js"></script>
  
  <!-- landing page -->
  <script src="js/landingPage.js"></script>

</body>

</html>
